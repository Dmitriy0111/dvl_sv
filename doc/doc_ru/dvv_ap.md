# dvv_ap (analysis port)

Данный файл содержит описание класса порта, необходимого для одностороннего обмена между верификационными компонентами совместно с классом dvv_ap (analysis export). Класс наследуется от dvv_bp и является приёмником данных. Переменная для обмена может иметь системный или пользовательский тип.

Заголовок:
```Verilog
class dvv_ap #(type item_type = int, type scr_type) extends dvv_bp #(item_type);
```

## Параметры класса:

| Поле      | Описание                          |
| --------- | --------------------------------- |
| item_type | Тип переменной для обмена         |
| scr_type  | Тип подписчика на событие приёма  |

## Поля и функции/задачи класса  

Данный класс наследует поля и функции/задачи из базового класса порта [dvv_bp.md](dvv_bp.md).

### Поля:
| Имя   | Тип       | Описание                  |
| ----- | --------- | ------------------------- |
| scr   | scr_type  | Экземпляр приёмника порта |

#### Значение некоторых полей:

| Поле      | Значение  |
| --------- | --------- |
| type_name | "dvv_ap"  |

### Функции/Задачи:
Класс содержит следующие функции/задачи:
| Имя       | Описание                              |
| --------- | ------------------------------------- |
| new       | Конструктор класса                    |
| write     | Функция для одностороннего приёма     |

### Описание функций/задач:

#### new
Конструктор класса для создания экземпляра dvv_ap.

Заголовок:
```Verilog
function new(scr_type scr = null, string p_name = "");
```

Аргументы:
| Имя       | Тип       | Описание              |
| --------- | --------- | --------------------- |
| scr       | scr_type  | Экземпляр приёмника   |
| p_name    | string    | Имя порта             |

#### write
Функция вызываемая при отправке информации от analysis_export.

Заголовок:
```Verilog
function void write(ref item_type item);
```

Аргументы:
| Имя   | Тип           | Описание              |
| ----- | ------------- | --------------------- |
| item  | ref item_type | Принимаемые данные    |

## Использование класса

При объявления экземпляра класса необходимо указать тип переменной подлежащей обмену, тип класса содержащего экземпляр analysis port и имя:
```verilog
    // Создание экземпляра класса с системным типом переменной
    typedef     dvv_scr #(int)          scr_type_0;
    dvv_ap      #(int,scr_type_0)       item_ap_0;
    // Создание экземпляра класса с пользовательским типом переменной
    typedef     dvv_scr #(user_t)       scr_type_1;
    dvv_ap      #(user_t,scr_type_1)    item_ap_1;
```
Данные объявления располагаются в разных классах где dvv_scr указывает тип класса подписчика события write.

Создание экземпляра класса производится вызовом конструктора:
```verilog
    item_ap_0 = new(this,"item_ap_0");
```

Для подключения экземпляра класса к экземпляру analysis export необходимо передать в качестве параметра экземпляр analysis port в функцию connect, при этом типы переменных для обмена должны совпадать. Один экземпляр класса analysis port может быть покдлючен к нескольким analysis export:
```verilog
    item_aep_0.connect(item_ap_0);
    item_aep_1.connect(item_ap_0);
    item_aep_2.connect(item_ap_0);
```

Функция write используется для вызова фунции write подписчика события, вызов которой происходит из функции write analysis export.

Данный класс чаще всего используется в классах наследуемых от dvv_scr, то есть подписчиков событий.