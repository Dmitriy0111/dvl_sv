# dvv_ap (analysis port)

Данный файл содержит описание класса порта, необходимого для одностороннего обмена между верификационными компонентами совместно с классом dvv_aep (analysis export). Данный класс является приёмником, а предметом обмена может служить системный или пользовательский тип.

## Поля и функции/задачи класса  

Класс содержит следующие поля:
| Имя       | Тип                 | Описание                    |
| --------- | ------------------- | --------------------------- |
| p_name    | string              | Имя порта                   |
| bp_list   | dvv_bp #(item_type) | Список портов приёмников    |
| scr       | scr_type            | Подписчик порта             |

Класс содержит следующие функции/задачи:
| Имя       | Описание                              |
| --------- | ------------------------------------- |
| new       | Конструктор класса                    |
| write     | Функция для одностороннего приёма     |
| connect   | Задача для соединения портов          |

## Использование класса

При объявления экземпляра класса необходимо указать тип переменной подлежащей обмену, тип класса содержащего экземпляр analysis port и имя:
```verilog
    // Создание экземпляра класса с системным типом переменной
    typedef     dvv_scr #(int)          scr_type_0;
    dvv_ap      #(int,scr_type_0)       item_ap_0;
    // Создание экземпляра класса с пользовательским типом переменной
    typedef     dvv_scr #(user_t)       scr_type_1;
    dvv_ap      #(user_t,scr_type_1)    item_ap_1;
```
Данные объявления располагаются в разных классах где dvv_scr указывает тип класса подписчика события write.

Создание экземпляра класса производится вызовом конструктора:
```verilog
    item_ap_0 = new(this,"item_ap_0");
```

Для подключения экземпляра класса к экземпляру analysis export необходимо передать в качестве параметра экземпляр analysis port в функцию connect базового класса dvv_bp, при этом типы переменных для обмена должны совпадать. Один экземпляр класса analysis port может быть покдлючен к нескольким analysis export:
```verilog
    item_aep_0.connect(item_ap_0);
    item_aep_1.connect(item_ap_0);
    item_aep_2.connect(item_ap_0);
```

Функция write используется для вызова фунции write подписчика события, вызов которой происходит из функции write analysis export.

Данный класс чаще всего используется в классах наследуемых от dvv_scr, то есть подписчиков событий.