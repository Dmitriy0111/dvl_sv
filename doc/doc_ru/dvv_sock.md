# dvv_sock (socket class)

Данный файл содержит описание канала обмена между верификационными компонентами с возможностью блокировки. Данные для обмена могут быть как системные, так и пользовательские.

## Поля и функции/задачи класса  

Класс содержит следующие поля:
| Имя       | Тип               | Описание                              |
| --------- | ----------------- | ------------------------------------- |
| sock_e    | event             | Событие по приёму или передачи данных |
| sock_m    | mailbox #(mail_t) | Канал обмена для передачи данных      |

Класс содержит следующие функции/задачи:
| Имя       | Описание                                          |
| --------- | ------------------------------------------------- |
| new       | Конструктор класса                                |
| connect   | Задача для соединения сокетов разных классов      |
| trig_sock | Задача для выставления события                    |
| wait_sock | Задача для ожидания события                       |
| put_msg   | Задача для помещения сообщения в канал обмена     |
| get_msg   | Задача для извлечения сообщения из канала обмена  |
| send_msg  | Задача для отправки сообщения                     |
| rec_msg   | Задача для приёма сообщения                       |

## Использование класса

При объявления экземпляра класса необходимо указать тип переменной подлежащей обмену и имя:
```Verilog
    // Объявление экземпляра класса с системным типом переменной
    dvv_sock    #(int)      item_sock_0;
    // Объявление экземпляра класса с пользовательским типом переменой
    dvv_sock    #(user_t)   item_sock_1;
```

Создание экземпляра класса производится вызовом конструктора:
```verilog
    item_sock_0 = new();
    item_sock_1 = new();
```

Для подключения одного экземпляра класса к другому экземпляру необходимо вызвать функцию connect, при этом типы переменных для обмена должны совпадать. Один канал обмена может быть подключен только один раз.
```verilog
    item_sock_in.connect(item_sock_out);
```

Для отправки сообщения следует использовать функцию send_msg.
```verilog
    int send_data;
    send_data = 8'h55;
    item_sock_0.send_msg(send_data);
```

Для принятия сообщения следует использовать функцию rec_msg.
```verilog
    int rec_data;
    item_sock_0.rec_msg(rec_data);
```